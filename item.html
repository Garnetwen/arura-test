<!doctype html>
<html lang="en" class="h-100">
  <head prefix="og: http://ogp.me/ns#">
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Collection Item | Arura-Test</title>
<link rel="shortcut icon" type="image/x-icon" href="/arura-test/favicon.ico">
<!--
  _____     ____        __  _           ___       _ __   __       
 / ___/__  / / /__ ____/ /_(_)__  ___  / _ )__ __(_) /__/ /__ ____
/ /__/ _ \/ / / -_) __/ __/ / _ \/ _ \/ _  / // / / / _  / -_) __/
\___/\___/_/_/\__/\__/\__/_/\___/_//_/____/\_,_/_/_/\_,_/\__/_/   
   
    built with CollectionBuilder-GH
    https://github.com/CollectionBuilder/collectionbuilder-gh 
-->
<meta name="generator" content="collectionbuilder-gh" />
<meta http-equiv="Content-Language" content="en-us" >

<!-- load style sheets -->

<link rel="stylesheet" href="/arura-test/assets/lib/bootstrap.min.css" type="text/css">



<!-- load custom css last to allow overrides -->
<link rel="stylesheet" href="/arura-test/assets/css/cb.css" type="text/css">



<!-- Last build date: 2025-07-02 -->
  </head>
  <body class="d-flex flex-column h-100">
    <div id="skip-to-content"><a href="#maincontent">Skip to main content</a></div>
    <div class="container">
    <div class="row align-items-center">
        <div id="title" class="col-12">
            <h1 class="mt-2"><a class="text-dark" href="/arura-test/">Arura-Test</a></h1>	 
            <p>a template for creating simple digital exhibits</p>
        </div>
        
    </div>
</div>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#page-nav" aria-controls="page-nav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        
        <div class="collapse navbar-collapse" id="page-nav">
            <ul class="navbar-nav me-auto">
                
                <li class="nav-item">
                    <a class="nav-link" href="/arura-test/">Home</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/arura-test/browse.html">Browse</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/arura-test/subjects.html">Subjects</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/arura-test/locations.html">Locations</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/arura-test/map.html">Map</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/arura-test/timeline.html">Timeline</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/arura-test/data.html">Data</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/arura-test/about.html">About</a>
                </li></ul>
            
            <script>
    function site_search() {
        var query = document.getElementById("site-search").value;
        window.open("/arura-test/search/index.html?q=" + encodeURIComponent(query), "_self" );
    }
</script>
<form class="form-inline my-2 my-lg-0" role="search" id="search" onsubmit="site_search(); return false;">
    <div class="input-group">
        <input id="site-search" class="form-control " type="text" placeholder="Search" aria-label="Search box">
        <button class="btn btn-light" type="submit">
            <span id="search-icon"><svg viewBox="0 0 1024 974" height="16px" width="20px"><path d="M960 832L710.875 582.875C746.438 524.812 768 457.156 768 384 768 171.96900000000005 596 0 384 0 171.969 0 0 171.96900000000005 0 384c0 212 171.969 384 384 384 73.156 0 140.812-21.562 198.875-57L832 960c17.5 17.5 46.5 17.375 64 0l64-64C977.5 878.5 977.5 849.5 960 832zM384 640c-141.375 0-256-114.625-256-256s114.625-256 256-256 256 114.625 256 256S525.375 640 384 640z"/></svg></span>
            <span class="visually-hidden">Search</span>
        </button>
    </div>
</form>
            
        </div>
    </div>
</nav>

    <main id="maincontent" role="main" class="flex-shrink-0">
    <div class="container py-3">
    <ul class="breadcrumb h6">
        <li class="breadcrumb-item"><a class="text-dark" href="/arura-test/">Arura-Test</a></li>
        <li class="breadcrumb-item"><a class="text-dark" href="/arura-test/browse.html">Browse</a></li>
        <li id="bc-title" class="breadcrumb-item active text-dark" aria-current="page"></li>
    </ul>
    <div class="my-0 h5 small" id="item-format"></div>
    <h2 id="item-title" class="mb-3"></h2>

    <div id="loading" class="text-center">
        <div class="spinner-border text-secondary" role="status"><span class="visually-hidden">Loading...</span></div>
    </div>

    <div class="row justify-content-center">

        <div class="col-12 col-md-10">
            <div id="item-content"></div>
        </div>
        <div class="col-12 col-md-10">
            <div id="item-metadata">
            </div>
        </div> 
    </div>

    <div id="browse-buttons" class="text-center">
        <a class="btn btn-secondary" href="/arura-test/browse.html">&laquo; Back to Collection Browse</a>
    </div>
    <div id="item-nav"></div>
 
</div>

    </main>
    <footer class="bg-dark pt-4 mt-auto container-fluid">

    <div class="row border-bottom border-white pb-4 mb-2">

        <div class="col-md-7 px-4 mt-3">

            <h2 class="h4"><a href="/arura-test/" class="text-white">Arura-Test</a></h2>
            <p class="text-white"><small>CollectionBuilder-GH is a template for creating small digital collection exhibits on GitHub Pages designed for teaching digital library skills</small></p>
            <nav>
                <ul id="footer-nav" class="nav nav-pills ">
                    <li class="nav-item">
                    
                        <a class="nav-link text-light" href="/arura-test/">Home</a>
                    </li>
                    <li class="nav-item">
                    
                        <a class="nav-link text-light" href="/arura-test/browse.html">Browse</a>
                    </li>
                    <li class="nav-item">
                    
                        <a class="nav-link text-light" href="/arura-test/subjects.html">Subjects</a>
                    </li>
                    <li class="nav-item">
                    
                        <a class="nav-link text-light" href="/arura-test/locations.html">Locations</a>
                    </li>
                    <li class="nav-item">
                    
                        <a class="nav-link text-light" href="/arura-test/map.html">Map</a>
                    </li>
                    <li class="nav-item">
                    
                        <a class="nav-link text-light" href="/arura-test/timeline.html">Timeline</a>
                    </li>
                    <li class="nav-item">
                    
                        <a class="nav-link text-light" href="/arura-test/data.html">Data</a>
                    </li>
                    <li class="nav-item">
                    
                        <a class="nav-link text-light" href="/arura-test/about.html">About</a>
                    </li></ul>
            </nav>

        </div>

        <div class="col-md-5 mt-3 text-center">

           
            <p class="text-white text-md-end" id="footer-credits">
                <small><em>built with</em>
                    <a href="https://collectionbuilder.github.io/" title="CollectionBuilder">
                        <img src="/arura-test/assets/img/collectionbuilder-logo.png" class="img-fluid" alt="CollectionBuilder" >
                    </a>
                </small>
            </p>

        </div>

    </div>

    <div class="col-md-12 text-center pt-3 pb-1">
        <p class="text-white">Last updated 2025</p>
    </div>

</footer>
    <!-- Bootstrap bundle JS -->
<script src="/arura-test/assets/lib/bootstrap.bundle.min.js"></script>
<!-- load other js -->
<script src="/arura-test/assets/lib/lazysizes.min.js" async></script>
<script src="/arura-test/assets/lib/spotlight.bundle.js" defer></script>
<script>
/* add item data */
var cb_items = [
];

/* function to find links to objects from filename field */ 
function findFileLink(record) {
    var fileLink = record.filename.includes('/') ? record.filename : "/arura-test/objects/" + record.filename;
    return fileLink;
}
/* function to create item page features */ 
function displayItem(record, prev_id, next_id, compound_object) { 

    /* add item title */
    var objectTitle = record.title;
    document.getElementById("bc-title").innerHTML = objectTitle;

    /* get item format for item title */
    var itemFormat;
    if (compound_object.length > 0) {
        itemFormat = record.format.replace("_", " ").toUpperCase() + ' (' + compound_object.length + ' Items)';
    } else if (record.format.includes("pdf")) {
        itemFormat = "PDF";
    } else if (record.format.includes("/")) {
        itemFormat = record.format.split("/")[0].toUpperCase();
    } else {
        itemFormat = record.format.replace("_", " ").toUpperCase();
    }
    document.getElementById("item-format").innerHTML = itemFormat;
    document.getElementById("item-title").innerHTML = record.format.includes('record') ? objectTitle : objectTitle + '<a href="#item-metadata" class="ms-5 btn btn-sm btn-outline-dark small">Item Info <svg class="bi icon-sprite" role="img" aria-label="Jump to Item Info"><use xlink:href="/arura-test/assets/lib/cb-icons.svg#arrow-down"/></svg></a>';
    
    /* add object */ 
    var format = "" + record.format;
    var objectLink = findFileLink(record);
    var itemImage, itemLink;

    /* function to add item to page */
    var itemDisplay, itemDownload;
    function addItem(item) {
        if (item.format.includes('image')) {
            itemDisplay = '<a class="spotlight gallery-img" data-download="true" href="' + findFileLink(item) + '"><img class="img-fluid" src="' + findFileLink(item) + '" alt="' + item.title + '">';
            itemDisplay += record.format.includes('multiple') ? '</a>' : '<div><small class="text-dark">Click to view full screen</small></div></a>';
            itemDownload = '<a href="' + findFileLink(item) + '" target="_blank" rel="noopener" class="btn btn-outline-primary" title="Object download">Download ' + item.format.split("/").pop().toUpperCase() + '</a>';
        } else if (item.format.includes('pdf')) {
            itemDisplay = '<div class="ratio ratio-4x3"><object title="PDF file of ' + item.title + '" data="' + findFileLink(item) + '" type="application/pdf" width="100%"><p>The PDF is not rendering in your browser. Please use the button below to download the PDF.</p></object></div>';
            itemDownload = '<a href="' + findFileLink(item) + '" target="_blank" rel="noopener" class="btn btn-outline-primary" title="Object download">Download PDF</a>';
        } else if (item.format.includes('audio')) {
            itemDisplay = '<audio controls class="w-100"><source src="' + findFileLink(item) + '">Your browser does not support the audio element. Please <a href="' + findFileLink(item) + '">download the audio file</a>.</audio>';
            itemDownload = '<a href="' + findFileLink(item) + '" target="_blank" rel="noopener" class="btn btn-outline-primary" title="Object download">Download ' + item.format.split("/").pop().toUpperCase() + '</a>';
        } else if (item.youtubeid) {
            itemDisplay = '<div class="ratio ratio-16x9"><iframe title="video embed ' + item.title + '" src="https://www.youtube-nocookie.com/embed/' + item.youtubeid + '?enablejsapi=1&rel=0&modestbranding=1" allowfullscreen></iframe></div>';
            itemDownload = '<a href="https://youtu.be/' + item.youtubeid + '" target="_blank" rel="noopener" class="btn btn-outline-primary" title="Object download">View on YouTube</a>';
        } else if (item.vimeoid) {
            itemDisplay = '<div class="ratio ratio-16x9"><iframe title="video embed ' + item.title + '"src="https://player.vimeo.com/video/' + item.vimeoid + '" allowfullscreen></iframe></div>';
            itemDownload = '<a href="https://vimeo.com/' + item.vimeoid + '" target="_blank" rel="noopener" class="btn btn-outline-primary" title="Object download">View on Vimeo</a>';
        } else if (item.format.includes('video')) {
            itemDisplay = '<video controls class="w-100"><source src="' + findFileLink(item) + '">Your browser does not support the video tag. Please <a href="' + findFileLink(item) + '">download the video file</a>.</video>';
            itemDownload = '<a href="' + findFileLink(item) + '" target="_blank" rel="noopener" class="btn btn-outline-primary" title="Object download">Download ' + item.format.split("/").pop().toUpperCase() + '</a>';
        } else if (item.format.includes('record')) {
            itemDisplay = item === record ? '' : '<img class="w-25" src="/arura-test/assets/lib/icons/file-text.svg" alt="No preview found">';
            itemDownload = findFileLink(item) != "" ? '<a href="' + findFileLink(item) + '" target="_blank" rel="noopener" class="btn btn-outline-primary" title="Object download">Link to Object</a>' : '';
        } else {
            /* fall back to no preview if it doesn't know the format */
            itemDisplay = '<img class="w-50" src="/arura-test/assets/lib/icons/file-earmark.svg" alt="No preview found">';
            itemDownload = '<a href="' + findFileLink(item) + '" target="_blank" rel="noopener" class="btn btn-outline-primary" title="Object download">Download Object</a>';
        }
        if (item === record) { itemImage = itemDisplay; }
    };

    /* function to add item metadata */
    function generateMetadata(item) {
        var fields = '<dl>';
        if (item["title"]) { fields += '<dt class="field">Title:</dt> <dd class="field-value">' + item["title"] + '</dd>'; }
        if (item["creator"]) { fields += '<dt class="field">Creator:</dt> <dd class="field-value">' + item["creator"] + '</dd>'; }
        if (item["date"]) { fields += '<dt class="field">Date Created:</dt> <dd class="field-value">' + item["date"] + '</dd>'; }
        if (item["description"]) { fields += '<dt class="field">Description:</dt> <dd class="field-value">' + item["description"] + '</dd>'; }
        
        if (item["subject"]) {
            var topics = item["subject"].split(';');
            var browseLinks = "";
            for (var i = 0, len = topics.length; i < len; i++) {
                if (topics[i] != "") {
                    browseLinks += '<a class="btn btn-link" href="/arura-test/browse.html#' + encodeURIComponent(topics[i].trim()) + '">' + topics[i].trim() + '</a> ';
                }
            }
            fields += '<dt class="field">Subjects:</dt> <dd class="field-value">' + browseLinks + '</dd>';
        }if (item["location"]) { fields += '<dt class="field">Location:</dt> <dd class="field-value">' + item["location"] + '</dd>'; }
        if (item["latitude"]) { fields += '<dt class="field">Latitude:</dt> <dd class="field-value">' + item["latitude"] + '</dd>'; }
        if (item["longitude"]) { fields += '<dt class="field">Longitude:</dt> <dd class="field-value">' + item["longitude"] + '</dd>'; }
        if (item["source"]) { fields += '<dt class="field">Source:</dt> <dd class="field-value">' + item["source"] + '</dd>'; }
        if (item["identifier"]) { fields += '<dt class="field">Source Identifier:</dt> <dd class="field-value">' + item["identifier"] + '</dd>'; }
        if (item["type"]) { fields += '<dt class="field">Type:</dt> <dd class="field-value">' + item["type"] + '</dd>'; }
        if (item["format"]) { fields += '<dt class="field">Format:</dt> <dd class="field-value">' + item["format"] + '</dd>'; }
        if (item["rights"]) { fields += '<dt class="field">Rights:</dt> <dd class="field-value">' + item["rights"] + '</dd>'; }
        if (item["rightsstatement"]) { fields += '<dt class="field">Rights Statement:</dt> <dd class="field-value"><a href="' + item["rightsstatement"] + '" target="_blank" rel="noopener">' + item["rightsstatement"] + '</a></dd>'; }
        
        fields += '</dl>';
        return fields;
    };

    /* function to add download, timeline, and map links */
    function addButtons(item) {
        itemLink = '<div class="btn-group" role="group" aria-label="Item options">'
        
        /* add link to view on timeline */
        if (item.date) {
            var itemYear;
            if (item.date.includes('-')) {
                itemYear = item.date.split('-')[0];
            } else if (item.date.includes('/')) {
                itemYear = item.date.split('/').pop();
            } else {
                itemYear = item.date;
            }
            var timelineButton = '<a href="/arura-test/timeline.html#y' + itemYear + '" class="btn btn-outline-primary">View on Timeline</a>';
            /* add timeline link to children only if specified in theme.yml */
            
                itemLink += timelineButton;
            
        }
        /* add link to view on map */
        var itemMarker = item.parentid ? item.parentid : itemPageId;
        var mapButton = '<a href="/arura-test/map.html?location=' + item.latitude + ',' + item.longitude + '&marker=' + itemMarker +'" class="btn btn-outline-primary">View on Map</a>';
        if (item.latitude && item.longitude) {
            /* add map link to children only if specified in theme.yml */
            
                itemLink += mapButton;
            
        }itemLink += item.format.includes('compound_object') || item.format.includes('multiple') ? compoundDownload : itemDownload;
        itemLink += '</div>'
    };

    /* create compound object cards */
    function compoundItems(compoundItem) {
        var objectCount = Object.keys(compoundItem).length;
        /* set up grid system for compound object cards */
        itemImage = format.includes('compound_object') ? '<div class="row row-cols-2 row-cols-lg-4 g-2">' : "";
        /* set up download dropdown button for compound object page */
        compoundDownload = '<div class="btn-group" role="group"><button class="btn btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Download</button> <ul class="dropdown-menu">';

        /* generate a modal and card for each item in compound object */
        for (let i = 0; i < compoundItem.length; i++) {
            var compoundLink = findFileLink(compoundItem[i]);
            var compoundFormat = compoundItem[i].format;
            var compoundTitle = compoundItem[i].title;
            var partOrder = i + 1;

            /* account for items without title */
            var itemTitle = typeof compoundTitle !== 'undefined' ? `<div class="small text-dark mb-2">${compoundTitle.split(" ").splice(0,4).join(" ")}...</div>` : '';

            /* get thumbnail or icon for compound object cards based on item format */
            var compoundIcon, compoundThumb;
            if (compoundFormat.includes('image')) {
                compoundIcon = compoundLink;
            } else if (compoundFormat.includes('pdf')) {
                compoundIcon = 'icon-pdf';
            } else if (compoundFormat.includes('audio')) {
                compoundIcon = 'icon-audio';
            } else if (compoundFormat.includes('video')) {
                compoundIcon = 'icon-video';
            } else if (compoundFormat.includes('record')) {
                compoundIcon = 'icon-record';
            } else {
                compoundIcon = 'icon-default';
            }

            /* set up image for compound object cards */
            if (compoundFormat.includes('image')) {
                compoundThumb = `<img class="img-thumbnail compound-thumb" src="${compoundIcon}" alt="image of ${compoundTitle ? compoundTitle : objectTitle + ', part ' + partOrder}">`;
            } else {
                compoundThumb = `
                    <svg class="bi text-body compound-thumb" fill="currentColor" aria-hidden="true">
                        <use xlink:href="/arura-test/assets/lib/cb-icons.svg#${compoundIcon}" />
                    </svg>
                    <span class="sr-only d-none">${compoundTitle ? compoundTitle : 'Part ' + partOrder + ' of ' + objectTitle} - ${compoundFormat}</span>`;
            }

            /* capture index for previous and next modal items */
            var itemPrev = i === 0 ? compoundItem[compoundItem.length - 1].objectid : compoundItem[i - 1].objectid;
            var itemNext = i + 1 === compoundItem.length ? compoundItem[0].objectid : compoundItem[i + 1].objectid;

            /* create item display and item download link */
            addItem(compoundItem[i]);

            /* create and add timeline button and map button; add item download link button*/
            addButtons(compoundItem[i]);

            /* define media type for stopMedia() function */
            var mediaType;
            if (compoundItem[i].youtubeid) {
                mediaType = "youtube"
            } else if (compoundItem[i].vimeoid) {
                mediaType = "vimeo"
            } else if (compoundItem[i].format.includes('video')) {
                mediaType = "video"
            } else if (compoundItem[i].format.includes('audio')) {
                mediaType = "audio"
            } else {
                mediaType = "nomedia"
            }

            /* add multiples or compound objects to page */
            if (format.includes('multiple')) {
                /* add full size item to page */
                itemImage += `
                    <div id="${compoundItem[i].objectid}" class="mb-4">
                        ${itemDisplay}
                        ${compoundTitle ? `<div><small class="text-dark">${compoundTitle}</small></div>` : ''}
                    </div>`;
            } else if (format.includes('compound_object')) {
                /* create compound object modal */
                var itemModal = `
                    <div class="modal fade" id="${compoundItem[i].objectid}" tabindex="-1" role="dialog" aria-labelledby="${compoundItem[i].objectid}ModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-xxl">
                            <div class="modal-content text-start">

                                <div class="modal-header">
                                    <div class="modal-title w-100" id="${compoundItem[i].objectid}ModalLabel">
                                        <div class="row">
                                            <div class="col-12 text-end">
                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="stopMedia('${mediaType}', '${compoundItem[i].objectid}');history.pushState('', '', window.location.href.replace(/#.*$/, ''))"></button>
                                            </div>
                                            <div class="col-1 col-md-2">
                                                <button data-bs-target="#${itemPrev}" data-bs-toggle="modal" onclick="stopMedia('${mediaType}', '${compoundItem[i].objectid}');window.location.hash='${itemPrev}'" class="btn btn-outline-dark btn-sm prev-child-button" >
                                                    <svg class="bi icon-sprite" role="img" aria-label="Previous Item">
                                                        <use xlink:href="/arura-test/assets/lib/cb-icons.svg#arrow-left"/>
                                                    </svg>
                                                    <span class="d-none d-md-inline">Previous Item</span>
                                                </button>
                                            </div>
                                            <div class="col-9 col-md-8 text-center">
                                                <h3 class="h5">${objectTitle}
                                                    <span class="d-none d-md-inline">-</span><span class="d-md-none"><br></span>
                                                    Item ${partOrder} of ${compoundItem.length}
                                                </h3>
                                            </div>
                                            <div class="col-1 col-md-2 text-end">
                                                <button data-bs-target="#${itemNext}" data-bs-toggle="modal" onclick="stopMedia('${mediaType}', '${compoundItem[i].objectid}');window.location.hash='${itemNext}'" class="btn btn-outline-dark btn-sm next-child-button">
                                                    <span class="d-none d-md-inline">Next Item</span>
                                                    <svg class="bi icon-sprite" role="img" aria-label="Next Item">
                                                        <use xlink:href="/arura-test/assets/lib/cb-icons.svg#arrow-right"/>
                                                    </svg>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="card mb-4 text-center">
                                                <div class="m-2">
                                                    ${itemDisplay}
                                                </div>

                                                <div class="my-2">
                                                    ${itemLink}
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <div class="metadata">
                                                ${generateMetadata(compoundItem[i])}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                /* return the compound object card */
                itemImage += `
                    <div class="col">
                        <div class="card h-100">
                            <div class="my-auto">
                                <div class="card-body text-center" id="${compoundItem[i].objectid}Card">
                                    ${itemTitle}
                                    <div class="mb-2">
                                        ${compoundThumb}
                                    </div>
                                    
                                    <!-- child object modal button -->
                                    <a id="item-${i+1}"
                                        role="button"
                                        data-bs-toggle="modal"
                                        href="#${compoundItem[i].objectid}"
                                        onclick="window.location.hash='${compoundItem[i].objectid}'"
                                        class="btn btn-sm btn-outline-secondary small stretched-link">
                                        ${compoundFormat.includes("image") ? compoundFormat.split("/")[0].toUpperCase() : compoundFormat.split("/").pop().toUpperCase()} <svg class="bi icon-sprite" fill="currentColor" aria-hidden="true"><use xlink:href="/arura-test/assets/lib/cb-icons.svg#${compoundFormat.includes('image') ? 'icon-image' : compoundIcon}"/></svg>
                                    </a>

                                    <!-- child object modal -->
                                    ${itemModal}
                                    <!-- end child modal -->
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            /* add compound object download links to download dropdown button */
            compoundDownload += `<li><a class="dropdown-item" target="_blank" rel="noopener" href="${compoundLink}">${compoundTitle ? compoundTitle.split(" ").splice(0,3).join(" ") + '... (' + compoundFormat + ')' : 'Item ' + partOrder + ' (' + compoundFormat + ')'}</a></li>`;
        }
        if (format.includes('compound_object')) { itemImage += '</div>'; }
        compoundDownload += '</ul></div></div>';
    };

    /* add items to page; generate compound objects if applicable */
    if(compound_object.length > 0) { 
        compoundItems(compound_object);
    } else {
        addItem(record);
    }

    /* add timeline, map, and download button links */
    addButtons(record);

    /* add content to item display area; page layout depends on item format */
    if (compound_object.length > 0 && !record.format.includes('multiple')) {
        itemContent = `
            <div class="mb-4">
                ${itemImage}
                <div class="my-2">
                    ${itemLink}
                </div>
            </div>
        `;
    } else if (record.format.includes('record')) {
        itemContent = `
            <div class="mb-4 text-center">
                <div class="my-2">
                    ${itemLink}
                </div>
            </div>
        `;
    } else if (record.format.includes('multiple')) {
        itemContent = `
            <div class="mb-4 text-center">
                ${itemImage}
                <div class="my-2">
                    ${itemLink}
                </div>
            </div>
        `;
    } else if (record.format.includes('video')|| record.format.includes('audio')) {
        itemContent = `
            <div class="card mb-4 text-center">
                <div class="card-body">
                    ${itemImage}
                    <div class="mt-2">
                        ${itemLink}
                    </div>
                </div>
            </div>
        `;
    } else if (record.format.includes('pdf')) {
        itemContent = `
            <div class="card mb-4 text-center">
                <div class="card-body">
                    <p>
                        ${itemImage}
                    </p>
                    <div class="mt-2">
                        ${itemLink}
                    </div>
                </div>
            </div>
        `;
    } else {
        itemContent = `
            <div class="card mb-4 text-center">
                ${itemImage}
                <div class="card-body">
                    ${itemLink}
                </div>
            </div>
        `;
    }
    document.getElementById("item-content").innerHTML = itemContent;
    
    /* add item metadata */
    document.getElementById("item-metadata").innerHTML = generateMetadata(record);

    
    /* add prev+next nav */
    var backUrl = "/arura-test/item.html?id=" + prev_id;
    var forwardUrl = "/arura-test/item.html?id=" + next_id;
    /* add side buttons to page */
    document.getElementById("item-nav").innerHTML = `<div class="d-none d-md-block">
            <a id="back-button" class="previous btn btn-lg btn-secondary" href="${backUrl}">&laquo;</a>
            <a id="next-button" class="next btn btn-lg btn-secondary" href="${forwardUrl}">&raquo;</a>
        </div>`;
    /* add bottom buttons to page */
    document.getElementById("browse-buttons").innerHTML = `<a id="prev-button" class="btn btn-secondary" href="${backUrl}">&laquo; Previous</a>
        <a class="btn btn-secondary" href="/arura-test/browse.html">Back to browse</a>
        <a id="for-button" class="btn btn-secondary" href="${forwardUrl}">Next &raquo;</a>`;

    /* add back forward key functionality for modal arrows */
    function leftModalArrowPressed() {
        /* Get the modal element. */
        var modalshow = document.querySelector(".modal.show");
        /* If the modal exists, get the prev button element. */
        if (modalshow) {
            const prevButton = modalshow.querySelector(".prev-child-button");
            /* If the prev button exists, click it. */
            if (prevButton) {
                prevButton.click();
            }
        }
    };

    function rightModalArrowPressed() {
        /* Get the modal element. */
        var modalshow = document.querySelector(".modal.show");
        /* If the modal exists, get the prev button element. */
        if (modalshow) {
            const nextButton = modalshow.querySelector(".next-child-button");
            /* If the prev button exists, click it. */
            if (nextButton) {
                nextButton.click();
            }
        }
    };

    function isModalShown() {
        /* Get the modal element. */
        const modal = document.querySelector(".modal.show");
        /* Check if the modal has the "show" class. */
        return modal && modal.classList.contains("show");
    };

    function isSpotlightModalShown() {
        /* Get the modal element. */
        const spotlight = document.getElementById("spotlight");
        /* Check if the modal has the "show" class. */
        return spotlight && spotlight.classList.contains("show");
    }

    document.onkeydown = function (evt) {
        if (isSpotlightModalShown()) {

        } else if (isModalShown()) {
            /* The modal is shown. */
            /* add back forward key press to modal */
            evt = evt || window.event;
            switch (evt.keyCode) {
                case 37:
                leftModalArrowPressed();
                    break;
                case 39:
                rightModalArrowPressed();
                    break;
            }
        }
        else {
            /* The modal is not shown. */
            /* add back forward key press to page */
            evt = evt || window.event;
            switch (evt.keyCode) {
                case 37:
                location.href = backUrl;
                    break;
                case 39:
                location.href = forwardUrl;
                    break;
            }
        }
    };}

/* initiate the Item page */ 

/* get objectid from URL */
let url = new URL(window.location);
var itemPageId = url.searchParams.get('id');
/* find the item by objectid */
var record_index = cb_items.findIndex(item => item.objectid == itemPageId); 
/* find any related children if applicable */ 
var child_records = cb_items.filter(item => item.parentid == itemPageId);

if (record_index != -1 && cb_items[record_index].parentid) {
    // provide redirect for child items of compound objects
    document.getElementById("bc-title").innerHTML = 'Child Item Error!';
    document.getElementById("item-title").innerHTML = 'This id is a child item in a compound object, please visit the <a href="/arura-test/item.html?id=' + cb_items[record_index].parentid + '#' + cb_items[record_index].objectid + '">parent item page to view</a>.';

} else if (record_index != -1) {
    // display item if it exists
    var prev_id, next_id;
    
    // find parents only 
    var parent_items = cb_items.filter(item => !item.parentid );
    var parent_record_index = parent_items.findIndex(item => item.objectid == itemPageId); 
    // find next and previous record
    var last = parent_items.length - 1;
    if (parent_record_index === 0) {
        prev_id = parent_items[last].objectid;
    } else { 
        prev_id = parent_items[parent_record_index - 1].objectid;
    }
    if (parent_record_index === last) {
        next_id = parent_items[0].objectid;
    } else {
        next_id = parent_items[parent_record_index + 1].objectid;
    }

    // display item
    displayItem(cb_items[record_index], prev_id, next_id, child_records);

} else {
    /* no item with that ID */
    document.getElementById("bc-title").innerHTML = 'Not found?';
    document.getElementById("item-title").innerHTML = 'Sorry, item not found. Please visit <a href="/arura-test/browse.html">Browse page</a> to find an item.';
}

/* all done, so hide loading animation */
document.getElementById("loading").style.display = "none";

/* function to stop video/audio/youtube/vimeo when the user clicks the next button, the previous button, or close button on a compound object modal */
function stopMedia(avType, modalId) {
    /* identify the correct modal */
    var modalElement = document.getElementById(modalId);
    /* select the corresponding element */
    var mediaElement;
    switch (avType) {
        case "youtube":
        case "vimeo": mediaElement = modalElement.querySelector("iframe");
        break;
        case "video": mediaElement = modalElement.querySelector("video");
        break;
        case "audio": mediaElement = modalElement.querySelector("audio");
        break;
    }
    /* pause or stop playback depending on element type */
    if (avType == "youtube") {
        var message = JSON.stringify({ event: 'command', func: 'pauseVideo', args: '' });
        mediaElement.contentWindow.postMessage(message, '*');
    } else if (avType == "vimeo") {
        mediaElement.contentWindow.postMessage('{"method":"pause"}', '*');
    } else if (avType == 'video' || avType == 'audio') {
        mediaElement.pause();
    }
};

</script>
<script>
    window.addEventListener('load', function () {
        if (window.location.hash) {
            /* if url has a hash, open the related item modal */
            var hashModal = decodeURIComponent(location.hash.substr(1));
            if (document.querySelector('#' + hashModal + 'Card a')) {
                document.querySelector('#' + hashModal + 'Card a').click();
            }
        }
    });
</script>

    <script>
    // When the user scrolls down from the top of the document, show the button
    window.onscroll = function () {
        if (document.body.scrollTop > 500 || document.documentElement.scrollTop > 500) {
            document.getElementById("scroll-to-top").style.display = "block";
        } else {
            document.getElementById("scroll-to-top").style.display = "none";
        }
    }
</script>
<a href="#maincontent" id="scroll-to-top" class="btn btn-link" title="Back to Top">
    <span class="visually-hidden">Back to top</span>
    <svg class="bi icon-sprite" role="img" aria-label="Up Arrow">
        <use xlink:href="/arura-test/assets/lib/cb-icons.svg#icon-back-to-top"/>
    </svg>
</a>
  </body>
</html>